!!!
%html
  %head
    %meta(http-equiv="Content-Type" content="text/html; charset=utf-8")
    %title Delpin
    %style
      :sass
        body
          font-family: sans-serif
  %body
    %h1 Delpin

    %h2 Find your Delicious network on Pinboard
    %form{ :method => 'get' }
      %label{ :for => "name" } Your Delicious username:
      %input{ :type => "text", :name => "name", :value => params[:name] }
      %button Search

    - if @friends
      %h2 Network of #{h @name}
      - if @friends.empty?
        %p No friends, sorry!
      - else
        %ul
          - @friends.each do |friend|
            - mapping = Mapping[:delicious => friend.downcase]
            %li
              %a{ :href => "http://delicious.com/#{h friend}"}=h friend
              &rarr;
              - if mapping && (pinboard = mapping.pinboard)
                %a{ :href => "http://pinboard.in/u:#{h pinboard}"}=h pinboard
              - else
                Unknown, but try
                %a{ :href => "http://pinboard.in/u:#{h friend}"}=h friend

    %hr

    %h2 Add your Delicious &rarr; Pinboard names for others to find
    %form{ :method => 'post', :action => '' }
      %p
        %label{ :for => "delicious" } Your Delicious username:
        %input{ :type => "text", :name => "delicious" }
      %p
        %label{ :for => "pinboard" } Your Pinboard username:
        %input{ :type => "text", :name => "pinboard" }
      %button Add

    %h2 Recently added
    - if @mappings.empty?
      %p None yet.
    - else
      %ul
        - @mappings.each do |mapping|
          %li
            %a{ :href => "http://delicious.com/#{h mapping.delicious}"}=h mapping.delicious
            &rarr;
            %a{ :href => "http://pinboard.in/u:#{h mapping.pinboard}"}=h mapping.pinboard
    %p
      By <a href="http://henrik.nyh.se">Henrik Nyh</a>.
      <a href="https://github.com/henrik/delpin">View source on GitHub</a>.

